<html>
    <head>
        <title>Infraestrutura Ágil</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
        <link rel="stylesheet" href="style.css">            
    </head>
    <body class="container">
        <div class="navbar">
            <p class="titulo">Infraestrutura Ágil (AWS)</p>
        </div>
        <div class="sidenav">
            <a href="./index.html">Início</a>
            <a href="./jenkins.html">Jenkins</a>
            <a href="./sonar">Sonar</a>
            <a href="./nexus.html">Nexus</a>
            <p class="current">Aplicação</p>
            <a href="./adicionais.html">Configurações</a>
        </div>
        <div class="main">
            <h1>Aplicação Carros API</h1>
            <p class="aviso">Execute os passos abaixo para configuração da Aplicação Carros API</p>
            <div class ="bloco">
                <span class="topico">Criando a Instância</span>
                Para criar uma instância vá no painel EC2 na opção <span class="menu-acesso">Instâncias -> Instâncias</span> e escolha a opção:
                <span class="acao">Executar Instâncias</span></br>
                Os parâmetros usados serão:</br></br>
                <span class="important">Nome:</span> carros-api</br>
                <span class="important">Máquina SO</span>: Ubuntu Server 22.04 LTS amd64</br>
                <span class="important">Máquina Type:</span> T2 Small</br>
                <span class="important">Disco:</span> 8GB</br>
                <img src="img/maquina-criar.jpg" alt="" class="image-aws" />
            </div>
            <div class="bloco">
                <span class="topico">Instância</span>
                Logo em seguida aguarde a instância ficar disponível
                <img src="img/maquina-instancia.jpg" width="377" class="image-aws" alt=""/>
            </div>
            <div class="bloco">
                <span class ="topico">Criar IP Elástico</span>
                Agora precisamos criar um IP Elástico para acesso "Externo", acesse o menu <span class="menu-acesso">Rede e Segurança -> Ips Elasticos</span>
                conforme a imagem abaixo, clique no menu depois em <span class="acao">Alocar endereço IP elástico</span>.</br>
                Dica: Quando alocar coloque o nome do ip elastico com o mesmo nome da instância criada para facilitar localização.</br>
                <img src="img/ipelastico.jpg" alt="" class="image-aws" width="500" />
            </div>
            <div class="bloco">
                <span class="topico">Associar IP Elástico</span>
                Precisamos associar esse IP a instância previamente criada, para isso então clique sobre o ip que acabou de criar,
                então será apresentado uma tela com as informações do ip, clique em <span class="acao">Associar endereço IP elástico</span>.</br>
                Na nova tela, <span class="menu-acesso" >Tipo de recurso</span> selecione Instância, então abaixo no campo <span class="menu-acesso" >Instância</span> selecione a instância previamente
                criada, Depois clique em <span class="acao">Associar</span>
                <img src="img/ipelastico-associar-maquina.jpg" alt="" class="image-aws"  width="500"/>
            </div>
            <div class="bloco">
                <span class="topico">Regras de Segurança</span>
                Para acessar a Instância criada, precisamos liberar as entradas de porta então acesse o menu: </br>
                <span class="menu-acesso">Rede e Segurança -> Security groups</span>.</br>
                Aproveite e renomeie o nome do grupo de segurança para o nome da instância criada previamente e depois 
                selecione a regra, no menu superior <span class="acao">Ações</span> selecione: <span class="menu-acesso">Editar regras de entrada</span>
                <img src="img/regraseguranca-acao.jpg" alt="" class="image-aws" width="500" /></br>
                Nas regras de entrada vamos liberar todas as portas, mas em produção se atente em liberar apenas as portas
                necessárias, mude o campo <span class="menu-acesso">Tipo</span> para <span class="menu-acesso">Todo o Tráfego</span> conforme abaixo e clique em: <span class="action" >Salvar Regras</span>.
                <img src="img/regraseguranca-entrada-all.jpg"  alt="" width="500" class="image-aws" />
            </div>
            <div class="bloco">
                <span class="topico">Acessando a instância</span>
                Caso você queira acessar o <span class = "menu-acesso">Shell</span> da máquina pelo browser, selecione a instância criada previamente clique em <span class="acao" >Conectar</span>, 
                na nova tela informe o usuário <span class="menu-acesso" >root</span>, depois clique em: <span class="acao">Conectar.</span></br>
                <img src="img/maquina-conetar-usuario.jpg" alt="" class="image-aws" width="400"/>
                Caso queira poderá usar o <span class="menu-acesso">CLI da AWS</span> ou um cliente SSH instalado local na sua estação.
            </div>
            <div class="code">
                <span class="topico">Instalando os Insumos para a aplicação Carros API</span>
                <pre>
#Instalar Docker 
  apt install apt-transport-https curl gnupg-agent ca-certificates software-properties-common -y
  curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
  add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable"
  apt install docker-ce docker-ce-cli containerd.io -y
  docker ps
  usermod -aG docker ubuntu
              </pre>
            </div>
            <div class="bloco">
                Para testar logue novamente na maquina com o usuário ubuntu  e execute o comando docker ps</br>
                Finalizamos as configurações dessa instância.
            </div>
        </div>
    </body>
</html>
